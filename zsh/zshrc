#
# .zshrc is sourced in interactive shells.
# It should contain commands to set up aliases,
# functions, options, key bindings, etc.
#
#  Not all terminals support this and, of those that do,
#  not all provide facilities to test the support, hence
#  the user should decide based on the terminal type.  Most
#  terminals  support the  colours  black,  red,  green,
#  yellow, blue, magenta, cyan and white, which can be set
#  by name.  In addition. default may be used to set the
#  terminal's default foreground colour.  Abbreviations
#  are allowed; b or bl selects black.
#
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000

# these substitutions seem to cause problems with tmux AND, with vi-mode seem unnecessary
# WORDCHARS="${WORDCHARS:s#/#}"
# WORDCHARS="${WORDCHARS:s#.#}"

# define the specifc files needing sourcing (these are addresses relative to HOME)
sources=( ".zsh/color.zsh" ".zsh/keys.zsh" ".zsh/completion.zsh" ".zsh/profile.zsh" ".zsh/alias.zsh" ".zsh/prompt.zsh" ".zsh/functions.zsh")

# call the unity source
. $HOME/.unity/unity.sh

# auto extra zsh completion files
if [[ "$fpath" != *.zsh/Completion* ]] ; then
    fpath=(~/.zsh/Completion $fpath)
fi

# This is a command that pipes all stderr to a red filter :)
# Compliments: http://skinwalker.wordpress.com/2012/01/24/stderr-zsh/

#if [[ -f $HOME/.rcbundles/stderred/build/libstderred.dylib ]] ; then
## export DYLD_INSERT_LIBRARIES=$HOME/dev/github_third-party/stderred/lib/stderred.dylib 
## export DYLD_FORCE_FLAT_NAMESPACE=1

#export DYLD_INSERT_LIBRARIES="$HOME/.rcbundles/stderred/build/libstderred.dylib${DYLD_INSERT_LIBRARIES:+:$DYLD_INSERT_LIBRARIES}"
#export STDERRED_ESC_CODE=$ERROR_RED
#else
#echo "${ERROR_RED}*** stderr is being piped to red output: may cause strange behavior"
#exec 2>>( while read X; do print "${ERROR_RED}${X}${NC}" > /dev/tty; done & )
#fi

if [ -f /opt/local/etc/profile.d/autojump.zsh ]; then
    . /opt/local/etc/profile.d/autojump.zsh
fi
if [ -f $HOME/local/bin/autojump.zsh ] ; then
    . $HOME/local/bin/autojump.zsh
fi
